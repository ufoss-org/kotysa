import org.jetbrains.kotlin.config.KotlinCompilerVersion

plugins {
    id 'java-test-fixtures'
}

println("Using Kotlin compiler version: $KotlinCompilerVersion.VERSION")

dependencies {
    api platform(project(':kotysa-platform'))

    implementation 'org.jetbrains.kotlin:kotlin-reflect'
    implementation 'io.github.microutils:kotlin-logging'

    compileOnly 'org.jetbrains.kotlinx:kotlinx-coroutines-core'
    compileOnly "org.jetbrains.kotlinx:kotlinx-datetime:$kotlinx_datetime_version"

    testFixturesImplementation "com.google.code.findbugs:jsr305:$jsr305_version"
    testFixturesImplementation "org.springframework:spring-core:$spring_core_version"
    testFixturesImplementation "org.jetbrains.kotlinx:kotlinx-datetime:$kotlinx_datetime_version"

    testImplementation 'org.junit.jupiter:junit-jupiter-api'
    testImplementation "ch.qos.logback:logback-classic:$logback_version"
    testImplementation "org.assertj:assertj-core:$assertj_version"
    testImplementation "org.jetbrains.kotlinx:kotlinx-datetime:$kotlinx_datetime_version"

    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'
}

compileTestFixturesKotlin {
    kotlinOptions {
        freeCompilerArgs = ['-Xjvm-default=enable']
        jvmTarget = '1.8'
    }
}

tasks.dokkaHtml.configure {
    dokkaSourceSets {
        configureEach {
            includes.from(files("../README.md"))
        }
    }
}
